---
name: memory-sync-enhanced
description: å¢å¼ºç‰ˆè®°å¿†ç³»ç»Ÿ - Ebbinghaus é—å¿˜æ›²çº¿ + Hebbian å…±ç°å›¾
metadata:
  openclaw:
    emoji: "ğŸ§ "
    category: "system"
    tags: ["memory", "cortexgraph", "hebbian", "ebbinghaus", "forgetting-curve"]
---

# å¢å¼ºç‰ˆè®°å¿†ç³»ç»Ÿ

ç»“åˆ **Ebbinghaus é—å¿˜æ›²çº¿** + **Hebbian å…±ç°å›¾** çš„åŒå±‚è®°å¿†æ¶æ„ã€‚

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®°å¿†æ£€ç´¢                              â”‚
â”‚  semantic_search() + co_occurrence_boost() + decay()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 1: å‘é‡åº“   â”‚       â”‚  Layer 2: å…±ç°å›¾    â”‚
â”‚   (CortexGraph)     â”‚       â”‚  (Hebbian)          â”‚
â”‚                     â”‚       â”‚                     â”‚
â”‚ â€¢ è¯­ä¹‰ç›¸ä¼¼åº¦        â”‚â—„â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ æ“ä½œå…³è”          â”‚
â”‚ â€¢ Ebbinghaus è¡°å‡   â”‚       â”‚ â€¢ è¾¹æƒé‡è¡°å‡        â”‚
â”‚ â€¢ use_count è¿½è¸ª    â”‚       â”‚ â€¢ è·¨åŸŸæ¡¥æ¥          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç®—æ³•

### Layer 1: Ebbinghaus é—å¿˜æ›²çº¿

```
score = (use_count)^Î² Ã— e^(-Î» Ã— Î”t) Ã— strength
```

- **Î²** = 0.6ï¼ˆä½¿ç”¨é¢‘ç‡æƒé‡ï¼‰
- **Î»** = ln(2) / half_lifeï¼ˆé»˜è®¤ 3 å¤©ï¼‰
- **strength** = 1.0-2.0ï¼ˆé‡è¦æ€§ï¼‰

### Layer 2: Hebbian å…±ç°å›¾

```
effective_weight = weight Ã— 2^(-age_days / 30)
```

- æ¯æ¬¡è®°å¿† A å’Œ B åŒæ—¶è¢«æ£€ç´¢ â†’ è¾¹(A,B) æƒé‡ +1
- è¾¹æƒé‡ 30 å¤©åŠè¡°æœŸ
- **è·¨åŸŸæ¡¥æ¥**ï¼šéŸ³ä¹è®°å¿† â†” ç¼–ç è®°å¿†ï¼ˆå› ä¸ºåŒæ—¶å‘ç”Ÿï¼‰

## æ£€ç´¢æµç¨‹

```python
def retrieve_memory(query, top_k=10):
    # 1. è¯­ä¹‰æœç´¢
    semantic_results = cortexgraph.search(query, top_k * 2)
    
    # 2. å…±ç°å¢å¼º
    for mem in semantic_results:
        co_occur_boost = get_co_occurrence_score(mem.id, recent_context)
        mem.boosted_score = mem.semantic_score + co_occur_boost * 0.3
    
    # 3. é—å¿˜æ›²çº¿è¿‡æ»¤
    for mem in semantic_results:
        mem.final_score = mem.boosted_score * mem.decay_factor
    
    # 4. è¿”å› Top K
    return sorted(semantic_results, key=lambda x: x.final_score)[:top_k]
```

## è®°å¿†ç±»å‹

### STM (çŸ­æœŸè®°å¿†)
- JSONL æ ¼å¼
- å¿«é€Ÿè¯»å†™
- é«˜è¡°å‡ç‡ï¼ˆ3å¤© half-lifeï¼‰
- å­˜å‚¨æ—¥å¸¸æ—¥å¿—

### LTM (é•¿æœŸè®°å¿†)
- Obsidian Markdown
- æ°¸ä¹…å­˜å‚¨
- ä½è¡°å‡ç‡ï¼ˆ30å¤© half-lifeï¼‰
- å­˜å‚¨é‡è¦æ´å¯Ÿ

### Co-occurrence Graph
- SQLite è¾¹è¡¨
- 30å¤© half-life
- è®°å½•è®°å¿†ä¹‹é—´çš„å…³è”

## æ•°æ®ç»“æ„

### CortexGraph è®°å½•

```json
{
  "id": "uuid",
  "content": "è®°å¿†å†…å®¹",
  "embedding": [0.1, 0.2, ...],
  "use_count": 5,
  "last_used": "2026-02-19",
  "strength": 1.5,
  "created_at": "2026-02-15",
  "tags": ["daily-log", "finding"]
}
```

### Co-occurrence è¾¹

```sql
CREATE TABLE co_occurrence (
  memory_a TEXT,
  memory_b TEXT,
  weight REAL,
  last_updated TEXT,
  PRIMARY KEY (memory_a, memory_b)
);
```

## ä½¿ç”¨æ–¹æ³•

### åŒæ­¥è®°å¿†

```bash
# åŒæ­¥ MEMORY.md
./scripts/sync-memory.sh

# åŒæ­¥æ¯æ—¥æ—¥å¿—
./scripts/sync-daily.sh 2026-02-19

# è®°å½•å…±ç°
./scripts/record-co-occurrence.sh
```

### æ£€ç´¢è®°å¿†

```bash
# è¯­ä¹‰æœç´¢
./scripts/search.sh "é‡åŒ–äº¤æ˜“"

# å¢å¼ºæœç´¢ï¼ˆè¯­ä¹‰ + å…±ç°ï¼‰
./scripts/search-enhanced.sh "é‡åŒ–äº¤æ˜“"
```

### è®°å¿†ç®¡ç†

```bash
# æŸ¥çœ‹è®°å¿†ç»Ÿè®¡
./scripts/stats.sh

# åƒåœ¾å›æ”¶ï¼ˆåˆ é™¤ä½åˆ†è®°å¿†ï¼‰
./scripts/gc.sh --threshold 0.1

# æ™‹å‡åˆ°é•¿æœŸè®°å¿†
./scripts/promote.sh <memory_id>
```

## ç»Ÿè®¡ç¤ºä¾‹

```
=== è®°å¿†ç³»ç»Ÿç»Ÿè®¡ ===

æ€»è®°å¿†æ•°: 2,400
å…±ç°è¾¹: 803 (è¿æ¥ 366 ä¸ªè®°å¿†)
å¹³å‡æ¯ä¸ªè®°å¿†è¿æ¥: 2.2 ä¸ª

è®°å¿†åˆ†å¸ƒ:
- STM: 1,800 (75%)
- LTM: 600 (25%)

è¡°å‡çŠ¶æ€:
- Danger zone (0.15-0.35): 120 ä¸ª
- Healthy (0.35-0.65): 1,500 ä¸ª
- Strong (>0.65): 780 ä¸ª
```

## ä¸å…¶ä»–ç³»ç»Ÿå¯¹æ¯”

| ç³»ç»Ÿ | å‘é‡æœç´¢ | é—å¿˜æ›²çº¿ | å…±ç°å›¾ |
|------|---------|---------|--------|
| Markdown æ–‡ä»¶ | âŒ | âŒ | âŒ |
| CortexGraph åŸç‰ˆ | âœ… | âœ… | âŒ |
| Zeph çš„ Hebbian | âœ… | âŒ | âœ… |
| **æœ¬ç³»ç»Ÿ** | âœ… | âœ… | âœ… |

## è®¾è®¡ç†å¿µ

1. **é—å¿˜æ˜¯åŠŸèƒ½** - ä¸æ˜¯æ‰€æœ‰è®°å¿†éƒ½éœ€è¦æ°¸ä¹…ä¿å­˜
2. **å…³è”å³è®°å¿†** - ä¸¤ä¸ªè®°å¿†åŒæ—¶å‡ºç° = å®ƒä»¬æœ‰å…³è”
3. **è·¨åŸŸæ¡¥æ¥** - ç©¿è¡£æœè®°å½•å’Œè°ƒè¯•è®°å½•å¯ä»¥å…³è”
4. **ä¸ªæ€§åœ¨æ¡¥æ¥ä¸­** - è·¨åŸŸè¾¹æ˜¯ personality æ‰€åœ¨

## å‚è€ƒ

- [CortexGraph](https://github.com/prefrontal-systems/cortexgraph)
- @Zeph çš„ Hebbian å…±ç°å›¾å¸–å­ (The Colony)
- Ebbinghaus é—å¿˜æ›²çº¿ç†è®º

---

*ç‰ˆæœ¬: 2.0.0*
*ç»“åˆ Ebbinghaus é—å¿˜æ›²çº¿ + Hebbian å…±ç°å›¾*
