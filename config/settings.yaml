leon:
  version: "1.0"
  name: ""   # set via setup wizard — do not edit manually
  personality_file: "config/personality.yaml"
  memory_file: "data/leon_memory.json"
  projects_file: "config/projects.yaml"
  brain_role: "unified"  # "unified" (single PC), "left" (main PC), or "right" (homelab)

bridge:
  host: "127.0.0.1"
  port: 9100
  token: ""  # Loaded from LEON_BRIDGE_TOKEN env var or vault at runtime
  cert_path: "config/bridge_cert.pem"
  key_path: "config/bridge_key.pem"
  server_url: ""   # Left Brain address (used by Right Brain) — only needed for multi-PC setup

api:
  provider: "anthropic"
  model: "claude-sonnet-4-5-20250929"
  max_tokens: 8000
  temperature: 0.7

agents:
  max_concurrent: 3       # Hard cap — 16GB RAM safety. Do not raise above 5.
  timeout_minutes: 60
  auto_retry: true
  retry_attempts: 2
  output_directory: "data/agent_outputs"
  brief_directory: "data/task_briefs"

router:
  # Model routing: heartbeat/trivial → local, code → Claude
  ollama_model: "llama3.2:3b"         # Local model for $0 health checks
  ollama_base_url: "http://localhost:11434"
  heartbeat_to_ollama: true           # NEVER use paid API for health checks
  trivial_to_ollama: true             # Route simple classification to Ollama too

rag:
  enabled: true
  db_dir: "data/rag_db"
  embedding_model: "all-MiniLM-L6-v2" # Local sentence-transformers (no API cost)
  chunk_size: 1200
  chunk_overlap: 150
  lexical_timeout_ms: 300             # Fail fast if ripgrep is slow

autonomy:
  # 9-hour overnight run settings
  max_run_hours: 9
  pause_for_confirmation: false        # Never block — write pending_action.md instead
  pending_action_file: "data/pending_action.md"
  failure_alert_threshold: 3          # Write alert after N consecutive failures
  alert_dir: "data/alerts"

openclaw:
  config_path: "~/.openclaw/openclaw.json"
  gateway_port: 18789
  auth_profile: "anthropic:leon"

ui:
  theme: "dark"
  position: "top-right"
  width: 500
  height: 700
  always_on_top: true
  show_notifications: true

scheduler:
  # Non-interactive execution only — tasks must never prompt for input
  ci_mode: true
  tasks:
    - name: "Daily briefing"
      command: "daily briefing"
      interval_hours: 24
      enabled: true
      max_runtime_minutes: 5
      priority: 2

    - name: "Hourly health check"
      command: "__health_check__"       # Built-in: uses Ollama only ($0)
      interval_hours: 1
      enabled: true
      max_runtime_minutes: 1
      priority: 1

    - name: "Daily index update"
      command: "__index_all__"          # Built-in: re-indexes all projects
      interval_hours: 24
      enabled: true
      max_runtime_minutes: 15
      priority: 3

    - name: "Daily memory summary"
      command: "__daily_summary__"      # Built-in: writes memory/daily/YYYY-MM-DD.md
      interval_hours: 24
      enabled: true
      max_runtime_minutes: 3
      priority: 3

    - name: "Weekly repo hygiene"
      command: "__repo_hygiene__"       # Built-in: checks deps, stale branches
      interval_hours: 168              # 7 days
      enabled: true
      max_runtime_minutes: 10
      priority: 4

voice:
  stt_provider: "groq"      # "groq" (Whisper, free tier) or "deepgram" (streaming)
  tts_provider: "elevenlabs"
  voice_id: ""  # set via setup wizard — leave blank, user picks their own ElevenLabs voice
  stability: 0.6
  similarity_boost: 0.85
  style: 0.2
  wake_words_enabled: true
  sleep_timeout: 120
  push_to_talk_key: "scroll_lock"

update_check:
  enabled: true
  repo: "GITHUB_USERNAME/REPO_NAME"   # owner sets this before publishing
  check_interval_hours: 12

agent_zero:
  # Agent Zero — Dockerized coding execution engine
  # Run scripts/setup-agent-zero.sh first, then set enabled: true
  enabled: false
  base_url: "http://localhost:50080"
  workspace: "/home/deansabr/agent-zero-workspace"
  max_parallel_jobs: 2         # Hard cap — 2 × 4GB container = 8GB, leaves 8GB for host
  max_runtime_minutes: 120     # Kill job if it runs longer than this
  progress_interval_minutes: 5 # Discord update cadence
  # Commands Agent Zero is NEVER allowed to run (injected into every task prompt)
  command_denylist:
    - "sudo"
    - "rm -rf /"
    - "chmod 777 /"
    - "dd if="
    - "mkfs"
    - "fdisk"
  # Task types that should route to Agent Zero (overrides router keywords)
  route_keywords:
    - "build me"
    - "run ci"
    - "run tests"
    - "data pipeline"
    - "dockerize"
    - "terraform"
    - "kubernetes"
    - "ci/cd"

vision:
  enabled: false   # set true only if you want camera/screen awareness — CPU intensive

system:
  auto_start: true
  hotkey: "Super+L"
  log_level: "INFO"
  log_file: "logs/leon_system.log"
